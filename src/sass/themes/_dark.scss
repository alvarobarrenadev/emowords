// ===== DARK MODE (PREMIUM SLATE) =====

[data-theme="dark"] {
  color-scheme: dark;
}

// Body
[data-theme="dark"] body {
  background: var(--gray-950);
  color: var(--gray-300);
}

// Navbar
[data-theme="dark"] .navbar {
  background: rgba(15, 23, 42, 0.85); // Slate 900
  backdrop-filter: blur(12px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: none;
}

[data-theme="dark"] .logo {
  background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
  -webkit-background-clip: text;
  background-clip: text;

  i {
    background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%);
    -webkit-background-clip: text;
    background-clip: text;
  }
}

[data-theme="dark"] .nav-link {
  color: var(--gray-400);
  font-weight: 500;
  transition: all 0.2s ease;

  &:hover {
    color: var(--gray-100);
    background: rgba(255, 255, 255, 0.05);
  }

  &.active {
    color: #60a5fa;
    background: rgba(59, 130, 246, 0.1);
  }

  &::before {
    display: none;
  }
}

[data-theme="dark"] .theme-toggle {
  background: transparent;
  border-color: transparent;
  color: var(--gray-400);

  &:hover {
    color: #fbbf24;
    background: rgba(251, 191, 36, 0.1);
  }
}

// Cards and Surfaces
[data-theme="dark"] .stat-card,
[data-theme="dark"] .word-card,
[data-theme="dark"] .form-grid,
[data-theme="dark"] .review-card,
[data-theme="dark"] .empty-state,
[data-theme="dark"] .quick-tips,
[data-theme="dark"] .progress-stat,
[data-theme="dark"] .chart-card {
  background: var(--gray-900);
  border: 1px solid var(--gray-800);
  box-shadow: var(--shadow);
  border-radius: var(--radius);
}

[data-theme="dark"] .word-card {
  transition: all 0.2s ease;

  &:hover {
    transform: translateY(-2px);
    border-color: var(--primary-500);
    box-shadow: var(--shadow-md), 0 0 0 1px rgba(59, 130, 246, 0.1);
    background: #152033;
  }
}

// Text Colors
[data-theme="dark"] .stat-value,
[data-theme="dark"] .word-info h3,
[data-theme="dark"] .form-title-add,
[data-theme="dark"] .review-word,
[data-theme="dark"] main#app h2 {
  color: var(--gray-50);
}

[data-theme="dark"] .stat-label,
[data-theme="dark"] .word-info .meaning-text,
[data-theme="dark"] .form-subtitle {
  color: var(--gray-400);
}

// Stat Icons
[data-theme="dark"] .stat-total .stat-icon {
  background: rgba(59, 130, 246, 0.15);
  color: #60a5fa;
}

[data-theme="dark"] .stat-remembered .stat-icon {
  background: rgba(16, 185, 129, 0.15);
  color: #34d399;
}

[data-theme="dark"] .stat-forgotten .stat-icon {
  background: rgba(245, 158, 11, 0.15);
  color: #fbbf24;
}

[data-theme="dark"] .stat-retention .stat-icon {
  background: rgba(14, 165, 233, 0.15);
  color: #38bdf8;
}

// Inputs
[data-theme="dark"] .search-box input,
[data-theme="dark"] .form-field input,
[data-theme="dark"] .form-field textarea,
[data-theme="dark"] .form-field select,
[data-theme="dark"] .filters select,
[data-theme="dark"] .typing-input {
  background: var(--gray-950);
  border-color: var(--gray-800);
  color: var(--gray-100);
  border-radius: var(--radius);

  &::placeholder {
    color: var(--gray-600);
  }

  &:focus {
    border-color: var(--primary-500);
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
    background: var(--gray-950);
  }
}

[data-theme="dark"] .search-icon,
[data-theme="dark"] .filter-icon {
  color: var(--gray-500);
}

[data-theme="dark"] .clear-btn {
  background: rgba(255, 255, 255, 0.05);
  color: var(--gray-400);

  &:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--gray-200);
  }
}

// Buttons
[data-theme="dark"] .action-btn,
[data-theme="dark"] .secondary-btn {
  background: var(--gray-800);
  border: 1px solid var(--gray-700);
  color: var(--gray-300);
  border-radius: var(--radius);

  &:hover {
    background: var(--gray-700);
    border-color: var(--gray-600);
    color: #fff;
  }
}

[data-theme="dark"] .back-btn {
  background: transparent;
  border-color: var(--gray-700);
  color: var(--gray-400);

  &:hover {
    background: var(--gray-800);
    color: white;
  }
}

// Results Info
[data-theme="dark"] .results-info {
  background: rgba(59, 130, 246, 0.1);
  border: 1px solid rgba(59, 130, 246, 0.2);
  border-left: 3px solid var(--primary-500);
  color: var(--primary-200);
}

[data-theme="dark"] .results-count {
  color: var(--primary-400);
}

// Tags
[data-theme="dark"] .type-tag {
  background: rgba(59, 130, 246, 0.15);
  color: #93c5fd;
  border: 1px solid rgba(59, 130, 246, 0.2);
}

[data-theme="dark"] .category-tag {
  background: rgba(148, 163, 184, 0.1);
  color: #94a3b8;
  border: 1px solid rgba(148, 163, 184, 0.2);

  i {
    color: #64748b;
  }
}

[data-theme="dark"] .remembered {
  background: rgba(16, 185, 129, 0.2) !important;
  color: #6ee7b7 !important;
  border: 1px solid rgba(16, 185, 129, 0.3);
}

[data-theme="dark"] .forgotten {
  background: rgba(245, 158, 11, 0.2) !important;
  color: #fcd34d !important;
  border: 1px solid rgba(245, 158, 11, 0.3);
}

[data-theme="dark"] .review-count-tag {
  background: var(--gray-800);
  color: var(--gray-400);
}

// Form Tips
[data-theme="dark"] .field-tip {
  background: rgba(15, 23, 42, 0.6);
  color: var(--primary-200);
  border: 1px solid rgba(59, 130, 246, 0.2);

  i {
    color: var(--primary-400);
  }
}

[data-theme="dark"] .form-field label {
  color: var(--gray-300);

  i {
    color: var(--primary-500);
  }
}

// Quick Tips
[data-theme="dark"] .quick-tips {
  background: var(--gray-900);
  border: 1px solid var(--gray-800);

  h3 {
    color: var(--gray-100);

    i {
      color: var(--primary-400);
    }
  }

  li {
    color: var(--gray-400);

    strong {
      color: var(--gray-300);
    }
  }
}

// Gamification Cards
[data-theme="dark"] .streak-card {
  background: linear-gradient(135deg, rgba(69, 26, 3, 0.4) 0%, rgba(120, 53, 15, 0.1) 100%);
  border: 1px solid rgba(245, 158, 11, 0.3);
  color: #fbbf24;
}

// Modal
[data-theme="dark"] .modal-overlay {
  background: rgba(2, 6, 23, 0.85);
  backdrop-filter: blur(4px);
}

[data-theme="dark"] .modal-content {
  background: var(--gray-900);
  border: 1px solid var(--gray-700);
  box-shadow: var(--shadow-xl);
}

[data-theme="dark"] .modal-header {
  border-bottom-color: var(--gray-800);

  h3 {
    color: var(--gray-50);
  }
}

[data-theme="dark"] .modal-close {
  background: transparent;
  color: var(--gray-500);

  &:hover {
    background: var(--gray-800);
    color: var(--gray-200);
  }
}

// Footer
[data-theme="dark"] .footer {
  background: var(--gray-950);
  border-top: 1px solid var(--gray-900);
}

[data-theme="dark"] .footer-content {
  color: var(--gray-500);
}

[data-theme="dark"] .footer a {
  color: var(--primary-500);

  &:hover {
    color: var(--primary-400);
  }
}

// Charts
[data-theme="dark"] .chart-title {
  color: var(--gray-300);
}

[data-theme="dark"] .chart-card {
  background: var(--gray-900);
}

// Packs
[data-theme="dark"] .pack-card {
  background: var(--gray-900);
  border: 1px solid var(--gray-700);
  transition: all 0.2s ease;

  &:hover {
    background: var(--gray-800);
    border-color: var(--primary-500);
  }

  &.selected {
    background: rgba(59, 130, 246, 0.1);
    border-color: var(--primary-500);
  }
}

[data-theme="dark"] .pack-icon {
  background: var(--gray-800);
  color: var(--primary-400);
}

[data-theme="dark"] .pack-info h4 {
  color: var(--gray-100);
}

[data-theme="dark"] .pack-info p {
  color: var(--gray-400);
}

[data-theme="dark"] .btn-cancel {
  background: transparent;
  border-color: var(--gray-700);
  color: var(--gray-400);

  &:hover {
    background: var(--gray-800);
    color: white;
  }
}

[data-theme="dark"] .mode-card {
  background: var(--gray-900);
  border: 1px solid var(--gray-800);

  &:hover {
    border-color: var(--primary-600);
    background: #152033;
  }
}

// Fix Text Visibility in Dark Mode
[data-theme="dark"] {

  // Empty State & Headers
  .empty-state h3,
  .packs-header h4,
  .mode-card h3 {
    color: var(--gray-100);
  }

  .empty-state p,
  .mode-card p {
    color: var(--gray-400);
  }

  // Import Button
  .import-packs-btn {
    color: var(--primary-400);
    background: rgba(59, 130, 246, 0.1);
    border: 1px solid rgba(59, 130, 246, 0.2);

    &:hover:not(:disabled) {
      background: rgba(59, 130, 246, 0.2);
      color: var(--primary-300);
    }

    &:disabled {
      color: var(--gray-600);
      background: rgba(255, 255, 255, 0.05);
      border-color: transparent;
    }
  }

  // Quiz & Review Specifics
  .quiz-word {
    color: var(--primary-400);
  }

  .quiz-option {
    background: var(--gray-900);
    border-color: var(--gray-700);
    color: var(--gray-200);

    &:hover {
      background: var(--gray-800);
      border-color: var(--primary-500);
      color: white;
    }
  }

  .answer-section {
    background: var(--gray-800);

    .section-content {
      color: var(--gray-300);
    }

    .section-label {
      color: var(--gray-400);
    }
  }

  // Flashcards, Quiz, Writing, Listening Titles
  .review-mode-card h3,
  .mode-card .mode-title {
    color: var(--gray-100) !important;
  }

  // --- NEW PREMIUM ADAPTATIONS ---

  // Controls Bar
  .controls-bar {
    background: var(--gray-900);
    border-color: var(--gray-800);
  }

  // Filters
  .filters .filter-group select:hover {
    background: var(--gray-800);
    border-color: var(--primary-500);
    color: var(--primary-300);
  }

  // Card Sections
  .word-card {
    background: var(--gray-900);
    border-color: var(--gray-800);

    &:hover {
      background: #152033;
      border-color: var(--primary-500);
    }

    .card-section {
      &.emotion-section {
        background: linear-gradient(135deg, rgba(244, 63, 94, 0.1) 0%, rgba(244, 63, 94, 0.05) 100%);
        border-left-color: #fb7185; // Rose 400

        .section-label i {
          color: #fb7185;
        }

        .emotion-text {
          color: var(--gray-200);
        }
      }

      &.example-section {
        background: var(--gray-800);
        border-left-color: var(--gray-600);

        .example {
          color: var(--gray-400);
        }
      }
    }
  }

  // Specific Tag Types
  .type-tag {
    &.type-word {
      background: rgba(59, 130, 246, 0.15); // Blue
      color: #93c5fd;
      border-color: rgba(59, 130, 246, 0.3);
    }

    &.type-phrasal {
      background: rgba(139, 92, 246, 0.15); // Purple
      color: #c4b5fd;
      border-color: rgba(139, 92, 246, 0.3);
    }

    &.type-expression {
      background: rgba(249, 115, 22, 0.15); // Orange
      color: #fdba74;
      border-color: rgba(249, 115, 22, 0.3);
    }

    &.type-connector {
      background: rgba(16, 185, 129, 0.15); // Emerald
      color: #6ee7b7;
      border-color: rgba(16, 185, 129, 0.3);
    }
  }

  // Action Buttons inside Cards
  .actions {
    border-top-color: var(--gray-800);

    .edit-btn {
      background: var(--gray-800);
      border-color: var(--gray-700);
      color: var(--gray-400);

      &:hover {
        background: var(--gray-700);
        color: var(--primary-300);
        border-color: var(--primary-500);
      }
    }

    .delete {
      background: var(--gray-800);
      border-color: var(--gray-700);
      color: var(--gray-500);

      &:hover {
        background: rgba(239, 68, 68, 0.1);
        border-color: rgba(239, 68, 68, 0.4);
        color: #fca5a5;
      }
    }

    .toggle {
      background: rgba(16, 185, 129, 0.1);
      border-color: rgba(16, 185, 129, 0.2);
      color: #34d399;

      &:hover {
        background: rgba(16, 185, 129, 0.2);
        border-color: #34d399;
      }

      &.unmark {
        background: var(--gray-800);
        border-color: var(--gray-700);
        color: var(--gray-400);

        &:hover {
          background: var(--gray-700);
          color: var(--gray-200);
        }
      }
    }
  }

  // Speak Button
  .speak-btn {
    background: rgba(59, 130, 246, 0.1);
    color: var(--primary-400);

    &:hover {
      background: var(--primary-600);
      color: white;
    }
  }
}